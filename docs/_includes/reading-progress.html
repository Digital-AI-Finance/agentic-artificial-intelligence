<!-- Reading Progress Indicator -->
<div id="reading-progress" class="reading-progress" aria-hidden="true">
  <div class="reading-progress-fill"></div>
</div>

<style>
.reading-progress {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 4px;
  background: rgba(0, 0, 0, 0.1);
  z-index: 9999;
}

.reading-progress-fill {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, #3333B2, #0066CC);
  transition: width 0.1s ease-out;
}

@media (prefers-reduced-motion: reduce) {
  .reading-progress-fill {
    transition: none;
  }
}

@media print {
  .reading-progress {
    display: none !important;
  }
}

/* Dark mode */
[data-theme="dark"] .reading-progress {
  background: rgba(255, 255, 255, 0.1);
}

[data-theme="dark"] .reading-progress-fill {
  background: linear-gradient(90deg, #6d6df0, #58a6ff);
}
</style>

<script>
(function() {
  const progressBar = document.querySelector('.reading-progress-fill');
  if (!progressBar) return;

  function updateProgress() {
    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
    const docHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
    const progress = docHeight > 0 ? (scrollTop / docHeight) * 100 : 0;
    progressBar.style.width = Math.min(100, Math.max(0, progress)) + '%';
  }

  // Throttle scroll events for performance
  let ticking = false;
  window.addEventListener('scroll', function() {
    if (!ticking) {
      window.requestAnimationFrame(function() {
        updateProgress();
        ticking = false;
      });
      ticking = true;
    }
  }, { passive: true });

  // Initial update
  updateProgress();
})();
</script>
